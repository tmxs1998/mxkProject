"use strict";$(function(){var t=$(".signinfo"),l=$("#s_username"),c=$("#s_pwd"),o=$("#s_repwd"),n=$("#s_yzm"),a=$("#s_btn"),s=$("#s_cb"),i=$(".s_war"),r=$(".sf_yzmRan"),h=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,e=/^[a-zA-Z]\w{5,11}$/,p=0;function v(){for(var t="";t.length<4;){var a=Math.floor(42*Math.random()+48);(48<=a&&a<=57||65<=a&&a<=90)&&(t+=String.fromCharCode(a))}return t}function f(){return p=0,h.test(l.val())?0==p&&i.css({opacity:0}):(i.css({opacity:1}),i.html("请输入正确的邮箱!!!"),p++),e.test(c.val())?0==p&&i.css({opacity:0}):(i.css({opacity:1}),i.html("请输入正确的密码!!!"),p++),o.val()===c.val()!=1?(i.css({opacity:1}),i.html("请输入正确的密码!!!"),p++):0==p&&i.css({opacity:0}),n.val()==r.html()!=1?(i.css({opacity:1}),i.html("请输入正确的验证码!!!"),p++):0==p&&i.css({opacity:0}),p}r.html(v()),t.blur(function(){f()}),r.click(function(){r.html(v()),n.val("")}),a.click(function(){s.prop("checked")?(i.css({opacity:0}),0==f()&&$.ajax("http://localhost:3000/userinfo").then(function(t){for(var a=0,s=0;s<t.length;s++){if(t[s].id==l.val())return alert("该用户名已注册"),l.val(""),c.val(""),o.val(""),n.val(""),void r.html(v());a++}a==t.length&&$.ajax("http://localhost:3000/userinfo",{type:"post",data:{id:l.val(),pwd:c.val()}}).then(function(){alert("注册成功"),location.assign("http://localhost:8080/html/login.html")})})):(i.css({opacity:1}),i.html("请勾选阅读并同意!!!"))})});