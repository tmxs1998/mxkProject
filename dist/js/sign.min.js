"use strict";$(function(){var t=$(".signinfo"),c=$("#s_username"),o=$("#s_pwd"),a=$("#s_repwd"),s=$("#s_yzm"),l=$("#s_btn"),n=$("#s_cb"),i=$(".s_war"),r=$(".sf_yzmRan"),h=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,e=/^[a-zA-Z]\w{5,11}$/,p=0;function f(){for(var t="";t.length<4;){var a=Math.floor(42*Math.random()+48);(48<=a&&a<=57||65<=a&&a<=90)&&(t+=String.fromCharCode(a))}return t}function u(){return p=0,h.test(c.val())?0==p&&i.css({opacity:0}):(i.css({opacity:1}),i.html("请输入正确的邮箱!!!"),p++),e.test(o.val())?0==p&&i.css({opacity:0}):(i.css({opacity:1}),i.html("请输入正确的密码!!!"),p++),a.val()===o.val()!=1?(i.css({opacity:1}),i.html("请输入正确的密码!!!"),p++):0==p&&i.css({opacity:0}),s.val()==r.html()!=1?(i.css({opacity:1}),i.html("请输入正确的验证码!!!"),p++):0==p&&i.css({opacity:0}),p}r.html(f()),t.blur(function(){u()}),r.click(function(){r.html(f()),s.val("")}),l.click(function(){n.prop("checked")?(i.css({opacity:0}),0==u()&&$.ajax("http://localhost:3000/userinfo").then(function(t){for(var a=0,s=0;s<t.length;s++){if(t[s].id==c.val())return void alert("该用户名已注册");a++}a==t.length&&$.ajax("http://localhost:3000/userinfo",{type:"post",data:{id:c.val(),pwd:o.val()}}).then(function(){alert("注册成功"),location.assign("http://localhost:8080/html/login.html")})})):(i.css({opacity:1}),i.html("请勾选阅读并同意!!!"))})});